(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{a.sortable=b(a.jQuery)}}}(this,function(b){var j;var r;var f=b();var n=[];var q=function(u){u.off("dragstart.h5s");u.off("dragend.h5s");u.off("selectstart.h5s");u.off("dragover.h5s");u.off("dragenter.h5s");u.off("drop.h5s")};var m=function(u){u.off("dragover.h5s");u.off("dragenter.h5s");u.off("drop.h5s")};var t=function(u,v){u.dataTransfer.effectAllowed="move";u.dataTransfer.setData("text","");if(u.dataTransfer.setDragImage){u.dataTransfer.setDragImage(v.item,v.x,v.y)}};var o=function(v,u){if(!u.x){u.x=parseInt(v.pageX-u.draggedItem.offset().left)}if(!u.y){u.y=parseInt(v.pageY-u.draggedItem.offset().top)}return u};var i=function(u){return{item:u[0],draggedItem:u}};var l=function(u,w){var v=i(w);v=o(u,v);t(u,v)};var k=function(v,u){if(typeof v==="undefined"){return u}return v};var c=function(u){u.removeData("opts");u.removeData("connectWith");u.removeData("items");u.removeAttr("aria-dropeffect")};var e=function(u){u.removeAttr("aria-grabbed");u.removeAttr("draggable");u.removeAttr("role")};var g=function(u,v){if(u[0]===v[0]){return true}if(u.data("connectWith")!==undefined){return u.data("connectWith")===v.data("connectWith")}return false};var p=function(x){var w=x.data("opts")||{};var u=x.children(w.items);var v=w.handle?u.find(w.handle):u;m(x);c(x);v.off("mousedown.h5s");q(u);e(u)};var d=function(y){var x=y.data("opts");var v=y.children(x.items);var w=x.handle?v.find(x.handle):v;y.attr("aria-dropeffect","move");w.attr("draggable","true");var u=(document||window.document).createElement("span");if(typeof u.dragDrop==="function"&&!x.disableIEFix){w.on("mousedown.h5s",function(){if(v.index(this)!==-1){this.dragDrop()}else{b(this).parents(x.items)[0].dragDrop()}})}};var s=function(x){var w=x.data("opts");var u=x.children(w.items);var v=w.handle?u.find(w.handle):u;x.attr("aria-dropeffect","none");v.attr("draggable",false);v.off("mousedown.h5s")};var h=function(x){var w=x.data("opts");var u=x.children(w.items);var v=w.handle?u.find(w.handle):u;q(u);v.off("mousedown.h5s");m(x)};var a=function(u,v){var w=b(u);var x=String(v);v=b.extend({connectWith:false,placeholder:null,dragImage:null,disableIEFix:false,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:false},v);return w.each(function(){var C=b(this);if(/enable|disable|destroy/.test(x)){a[x](C);return}v=k(C.data("opts"),v);C.data("opts",v);h(C);var y=C.children(v.items);var z;var B;var A;var E=(v.placeholder===null)?b("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="'+v.placeholderClass+'"/>'):b(v.placeholder).addClass(v.placeholderClass);if(!C.attr("data-sortable-id")){var F=n.length;n[F]=C;C.attr("data-sortable-id",F);y.attr("data-item-sortable-id",F)}C.data("items",v.items);f=f.add(E);if(v.connectWith){C.data("connectWith",v.connectWith)}d(C);y.attr("role","option");y.attr("aria-grabbed","false");if(v.hoverClass){var D="sortable-over";if(typeof v.hoverClass==="string"){D=v.hoverClass}y.hover(function(){b(this).addClass(D)},function(){b(this).removeClass(D)})}y.on("dragstart.h5s",function(G){G.stopImmediatePropagation();if(v.dragImage){t(G.originalEvent,{item:v.dragImage,x:0,y:0});console.log("WARNING: dragImage option is deprecated and will be removed in the future!")}else{l(G.originalEvent,b(this),v.dragImage)}j=b(this);j.addClass(v.draggingClass);j.attr("aria-grabbed","true");z=j.index();r=j.height();B=b(this).parent();j.parent().triggerHandler("sortstart",{item:j,placeholder:E,startparent:B})});y.on("dragend.h5s",function(){if(!j){return}j.removeClass(v.draggingClass);j.attr("aria-grabbed","false");j.show();f.detach();A=b(this).parent();j.parent().triggerHandler("sortstop",{item:j,startparent:B,});if(z!==j.index()||B.get(0)!==A.get(0)){j.parent().triggerHandler("sort-update",{item:j,index:A.children(A.data("items")).index(j),oldindex:y.index(j),elementIndex:j.index(),oldElementIndex:z,startparent:B,endparent:A})}j=null;r=null});b(this).add([E]).on("drop.h5s",function(G){if(!g(C,b(j).parent())){return}G.stopPropagation();f.filter(":visible").after(j);j.trigger("dragend.h5s");return false});y.add([this]).on("dragover.h5s dragenter.h5s",function(I){if(!g(C,b(j).parent())){return}I.preventDefault();I.originalEvent.dataTransfer.dropEffect="move";if(y.is(this)){var J=b(this).height();if(v.forcePlaceholderSize){E.height(r)}if(J>r){var G=J-r;var H=b(this).offset().top;if(E.index()<b(this).index()&&I.originalEvent.pageY<H+G){return false}if(E.index()>b(this).index()&&I.originalEvent.pageY>H+J-G){return false}}j.hide();if(E.index()<b(this).index()){b(this).after(E)}else{b(this).before(E)}f.not(E).detach()}else{if(!f.is(this)&&!b(this).children(v.items).length){f.detach();b(this).append(E)}}return false})})};a.destroy=function(u){p(u)};a.enable=function(u){d(u)};a.disable=function(u){s(u)};b.fn.matasortable=function(u){return a(this,u)};return a}));