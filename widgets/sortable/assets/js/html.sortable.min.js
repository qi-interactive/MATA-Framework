"use strict";(function(d){var c,b,a=d();d.fn.matasortable=function(e){var f=String(e);e=d.extend({connectWith:false,placeholder:null,dragImage:null},e);return this.each(function(){var i,g=d(this).children(e.items),k=e.handle?g.find(e.handle):g;if(f==="reload"){d(this).children(e.items).off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}if(/^enable|disable|destroy$/.test(f)){var j=d(this).children(d(this).data("items")).attr("draggable",f==="enable");if(f==="destroy"){d(this).off("sort-update");d(this).removeData("opts");j.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s dragover.h5s dragenter.h5s drop.h5s").off("sort-update");k.off("selectstart.h5s")}return}var h=d(this).data("opts");if(typeof h==="undefined"){d(this).data("opts",e)}else{e=h}var m,l;var n=(e.placeholder===null)?d("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder"/>'):d(e.placeholder).addClass("sortable-placeholder");d(this).data("items",e.items);a=a.add(n);if(e.connectWith){d(e.connectWith).add(this).data("connectWith",e.connectWith)}g.attr("role","option");g.attr("aria-grabbed","false");k.attr("draggable","true").not("a[href], img").on("selectstart.h5s",function(){if(this.dragDrop){this.dragDrop()}return false}).end();g.on("dragstart.h5s",function(p){var o=p.originalEvent.dataTransfer;o.effectAllowed="move";o.setData("text","");if(e.dragImage&&o.setDragImage){o.setDragImage(e.dragImage,0,0)}i=(c=d(this)).addClass("sortable-dragging").attr("aria-grabbed","true").index();b=c.outerHeight();m=d(this).parent();c.parent().triggerHandler("sortstart",{item:c,startparent:m})}).on("dragend.h5s",function(){if(!c){return}c.removeClass("sortable-dragging").attr("aria-grabbed","false").show();a.detach();l=d(this).parent();if(i!==c.index()||m.get(0)!==l.get(0)){c.parent().triggerHandler("sort-update",{item:c,oldindex:i,startparent:m,endparent:l})}c=null;b=null}).add([this,n]).on("dragover.h5s dragenter.h5s drop.h5s",function(q){if(!g.is(c)&&e.connectWith!==d(c).parent().data("connectWith")){return true}if(q.type==="drop"){q.stopPropagation();a.filter(":visible").after(c);c.trigger("dragend.h5s");return false}q.preventDefault();q.originalEvent.dataTransfer.dropEffect="move";if(g.is(this)){var r=d(this).outerHeight();if(e.forcePlaceholderSize){n.height(b)}if(r>b){var o=r-b,p=d(this).offset().top;if(n.index()<d(this).index()&&q.originalEvent.pageY<p+o){return false}else{if(n.index()>d(this).index()&&q.originalEvent.pageY>p+r-o){return false}}}c.hide();d(this)[n.index()<d(this).index()?"after":"before"](n);a.not(n).detach()}else{if(!a.is(this)&&!d(this).children(e.items).length){a.detach();d(this).append(n)}}return false})})}})(jQuery);